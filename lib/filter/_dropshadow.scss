
@function strip-units($number) {
  @return $number / ($number * 0 + 1);
}

//
// Cassetto drop shadow filter.
//
@mixin dropshadow( $offset-x: 2px, $offset-y: 2px, $blur-radius: 5px, $spread-radius: 0px, $color: false ) {
  //
  // Can be applied to html or svg elements.
  // (!= box-shadow)
  //
  -webkit-filter: drop-shadow($offset-x $offset-y $blur-radius $color);

  filter: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg">
    <filter id="dropshadow">
      <feGaussianBlur in="SourceAlpha" stdDeviation="#{strip-units($blur-radius)}"/>
      <feOffset dx="#{strip-units($offset-x)}" dy="#{strip-units($offset-y)}" result="offsetblur"/>
      <feFlood flood-color="#{$color}"/>
      <feComposite in2="offsetblur" operator="in"/>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </svg>#dropshadow');

  -ms-filter: "progid:DXImageTransform.Microsoft.Dropshadow(OffX=#{$offset-x}, OffY=#{$offset-y}, Color='#{$color}')";
  filter: "progid:DXImageTransform.Microsoft.Dropshadow(OffX=#{$offset-x}, OffY=#{$offset-y}, Color='#{$color}')";
}

%dropshadow {
  @include dropshadow;
}
